---
parent: "[[Fleeting MOC]]"
tags:
  - ğŸª´weedy
  - dailyNotes
date: 
draft: false
---




## ä¸€ã€å¼•è¨€

å­¦è®¡ç®—æœºæœ€æ—©ä¸€èˆ¬ä¼šäº†è§£ Byteï¼ˆå­—èŠ‚ï¼‰ å’Œ Bitï¼ˆä½ï¼‰ çš„åŒºåˆ«ã€‚ç¬”è€…è¿˜è¿˜å¾—å½“å¹´ç ”ç©¶ç”Ÿé¢è¯•çš„æ—¶å€™ï¼Œå¯¼å¸ˆçœ‹æˆ‘æ˜¯è·¨ä¸“ä¸šçš„æ¯”è¾ƒæ‹…å¿ƒï¼Œè¿˜çœŸçš„é—®åˆ°æˆ‘è¿™ä¸ªé—®é¢˜ã€‚

ä½è¿ç®—åœ¨é¢è¯•ä¸­ä¸å¤šè§ï¼Œä½†æ˜¯åœ¨ç®—æ³•ä¸­ç”¨åˆ°å¾€å¾€ä¼šåŠ åˆ†æ¯”å¦‚æœ¬æ–‡ä¾‹å­ä¸­ç”¨æ¥è®°å½•é€‰æ‹©ã€‚æ¯”èµ·å…¶ä»–é«˜çº§æ•°æ®ç»“æ„æ¯”å¦‚ Setã€Array å’Œ Listï¼Œç©ºé—´å¤æ‚æ€§æ›´å‹å¥½ã€‚

## äºŒã€åŸºæœ¬è¿ç®—

ä½è¿ç®—çš„ä¸ã€æˆ–ã€éã€å¼‚æˆ–ã€å–åè¿™é‡Œå°±ä¸å…·ä½“è¯´æ˜ï¼Œè®°å¾—ä¸è¦è·Ÿé€»è¾‘è¿ç®—ç¬¦ææ··å°±å¥½äº†ã€‚å¦å¤–è´Ÿæ•°åœ¨è®¡ç®—æœºä¸­é€šè¿‡è¡¥ç æ¥è¡¨ç¤ºï¼ˆå–å+1ï¼‰ã€‚

ä¸‹é¢æ˜¯ä¸€äº›ä½è¿ç®—åŸºæœ¬çš„ç”¨æ³•ã€‚

1. åˆ¤æ–­å¥‡å¶æ€§ï¼š X & 1 == 1 => å¥‡æ•°ï¼Œ== 0 => å¶æ•°
2. æŠŠæœ€ä½ä½çš„ 1 æ¸… 0 => X = X & (X-1)
3. å¾—åˆ°æœ€ä½ä½çš„ 1 æ¯”å¦‚ 1100 è¿”å› 100 => X & -X
4. æŠŠ X æœ€å³è¾¹çš„ n ä½æ¸… 0 => X & (~0 << n)
5. è·å– X çš„ç¬¬ n ä½å€¼ => (X >> n) & 1
6. è·å– X çš„ç¬¬ n ä½çš„å¹‚å€¼ => X & (1 << (n-1)) ???
7. ä»…å°†ç¬¬ n ä½ç½®ä¸º 1 => X | (1 << n)
8. ä»…å°†ç¬¬ n ä½ç½®ä¸º 0 => X & (~(1 << n))
9. å°† X æœ€é«˜ä½è‡³ n ä½ï¼ˆå«ï¼‰æ¸… 0 => X & ((1 << n) - 1)
10. å°†ç¬¬ n ä½è‡³ç¬¬ 0 ä½ï¼ˆå«ï¼‰æ¸… 0 => X & (~((1 << (n + 1)) - 1))
11. å¼‚æˆ–ç‰¹æ€§
	X ^ 0 = X
	X ^ 1(å…¨ 1) = ï½Xï¼ˆå–åï¼‰ï¼Œ1ï¼ˆå…¨ 1ï¼‰= ï½0
	X ^ (~X) = 1(å…¨ 1)
	X ^ X = 0
	äº¤æ¢ç‡ => a ^ b = c => a ^ c = b, b ^ c = a
	ç»“åˆå¾‹ => a ^ b ^ c = a ^ (b ^ c) = (a ^ b) ^ c

## ä¸‰ã€è§£å†³é—®é¢˜ä¾‹å­

è¿™é‡Œä¸¾ä¸€ä¸ªæ±‚è§£å…«çš‡åæ‰€æœ‰è§£æ³•ä¸ªæ•°çš„é—®é¢˜ã€‚å›½é™…è±¡æ£‹ä¸­çš„å…«çš‡åé—®é¢˜æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ª 8 X 8 çš„æ£‹ç›˜ä¸Šï¼Œæ¯è¡Œæ‘†ä¸€ä¸ªçš‡åï¼Œä¸å†²çªçš„æƒ…å†µä¸‹æ±‚ä¸€å…±æœ‰å¤šå°‘ç§æ‘†æ³•ã€‚çš‡åèƒ½æ”»å‡»åœ¨åŒä¸€è¡Œã€åŒä¸€åˆ—ã€æ­£æ–œçº¿ã€åæ–œçº¿ä¸Šçš„æ‰€æœ‰å…¶ä»–æ£‹å­ï¼ˆåŒ…æ‹¬çš‡åï¼‰ï¼Œæ‰€ä»¥è¿™æ˜¯çº¦æŸæ¡ä»¶ï¼šæ‘†æ”¾å¥½çš„å…«çš‡åä¸èƒ½åœ¨åŒä¸€è¡Œã€åŒä¸€åˆ—ã€æ­£æ–œçº¿å’Œåæ–œçº¿ä¸Šã€‚

å…«çš‡åç®€å•è§£æ³•æ˜¯å›æº¯æ³•ã€‚æ¯è¡Œæœ‰ 8 ç§é€‰æ‹©ï¼ˆä»ç¬¬1åˆ°ç¬¬8åˆ—ï¼‰ï¼Œå¦‚æœçš‡åä¹‹é—´æ²¡æœ‰å†²çªåˆ™é€’å½’è°ƒç”¨åˆ°ä¸‹ä¸€è¡Œï¼Œç›´åˆ°æœ€åä¸€è¡Œæ‰¾åˆ°ä¸€ä¸ªå¯è¡Œè§£ï¼Œå¦åˆ™æå‰é€€å‡ºå›æº¯å…¶ä»–é€‰æ‹©ã€‚

é‡‡ç”¨ä½è¿ç®—ä¹Ÿå¯ä»¥æ±‚è§£æ‰€æœ‰çš„è§£æ³•ã€‚
```java
package org.stone.study.algo.ex202402;  
  
import java.util.Arrays;  
  
/**  
 * åˆ†åˆ«é‡‡ç”¨ä½è¿ç®—å’Œå›æº¯æ³•æ±‚è§£å…«çš‡åçš„æ‰€æœ‰è§£æ³•ä¸ªæ•°é—®é¢˜  
 */  
public class EightQueen {    
    public EightQueen(int n) {  
        this.n = n;  
    }  
    
    public static void main(String[] args) {  
        EightQueen eightQueen = new EightQueen(8);  
        // å…«çš‡åæ‰€æœ‰è§£ä¸º92ä¸ª  
//         int count = eightQueen.dfs1(0, 0, 0, 0);  
        int count = eightQueen.backtrack();  
        System.out.println("count:" + count);  
    }  
  
    /**  
     * ä½è¿ç®—æ–¹å¼è®¡ç®—å…«çš‡åçš„è§£æ³•ä¸ªæ•°  
     * @param rowï¼šå½“å‰è¡Œæ•°  
     * @param colï¼šä¸€ä¸ªæ•´æ•°è¡¨ç¤ºæ‰€æœ‰åˆ—ä¸Šæ”¾ç½®çš‡åçš„æƒ…å†µ  
     * @param pieï¼šä¸€ä¸ªæ•´æ•°è¡¨ç¤ºæ‰€æœ‰æ–œçº¿ä¸Šæ”¾ç½®çš‡åçš„æƒ…å†µ  
     * @param naï¼šä¸€ä¸ªæ•´æ•°è¡¨ç¤ºæ‰€æœ‰åå‘æ–œçº¿ä¸Šæ”¾ç½®çš‡åçš„æƒ…å†µ  
     */  
    public int dfs1(int row, int col, int pie, int na) {  
        int count = 0;  
        if(row == n) {  
            return 1;  
        }  
  
        // ä¸€å…±æœ‰å¤šå°‘ä¸ªä½ç½®å¯ä»¥æ”¾  
        int bits = (~(col | pie | na)) & ((1 << n) - 1);  
  
        while(bits > 0) {  
            // å–æœ€åä¸€ä¸ª 1 è¡¨ç¤ºçš„æ•°  
            int bit = bits & -bits;  
            // pie ä¸‹ä¸€è¡Œå·¦ç§»1ä½çš„ä½ç½®å·²ç»è¢«å ç”¨äº†ï¼Œna ä¸‹ä¸€è¡Œå³ç§»1ä½çš„ä½ç½®ä¹Ÿè¢«å ç”¨äº†  
            count += dfs1(row + 1, col | bit, (pie | bit) << 1, (na | bit) >> 1);  
            // è¿™ä¸ªä½ç½®å·²ç»è¢«é€‰æ‹©è¿‡äº†ï¼Œéœ€è¦å»æ‰  
            bits = bits & (bits - 1);  
        }  
  
        return count;  
    }  
  
    /**  
     * å›æº¯æ³•æ±‚è§£ N çš‡åçš„è§£æ³•ä¸ªæ•°  
     * @return  
     */  
    public int backtrack() {  
        int[][] board = new int[8][8];  
        for(int i = 0; i < 8; i++) {  
            Arrays.fill(board[i], 0);  
        }  
  
        return dfs2(board, 0);  
    }  
  
    public int dfs2(int[][] board, int row) {  
        if(row == n) {  
            return 1;  
        }  
  
        int count = 0;  
        for(int j = 0; j < n; j++) {  
            //å‰ªæ + å›æº¯  
            if(validMove(board, row, j)) {  
                board[row][j] = 1;  
                count += dfs2(board, row + 1);  
                board[row][j] = 0;  
            }  
        }  
  
        return count;  
    }  
  
    /**  
     * åˆ¤æ–­å½“å‰èµ°çš„ä¸€æ­¥æ˜¯å¦åˆæ³•ï¼šåˆ—ä¸Šæ²¡æœ‰çš‡åï¼›å·¦ä¸Šæ–œçº¿æ²¡æœ‰çš‡åï¼›å³ä¸Šæ–œçº¿æ²¡æœ‰çš‡å  
     * @param board  
     * @param row  
     * @param col  
     * @return  
     */  
    private boolean validMove(int[][] board, int row, int col) {  
        // åŒä¸€åˆ—ä¸Šä¸èƒ½æœ‰çš‡å  
        for(int i = 0; i < row; i++) {  
            if(board[i][col] == 1) return false;  
        }  
  
        // å·¦ä¸Šçš„åæ–œçº¿ä¸Šä¸èƒ½æœ‰çš‡å  
        for(int i = row - 1, j = col -1; i >= 0 && j >= 0; i--,j--) {  
            if(board[i][j] == 1) return false;  
        }  
  
        // å³ä¸Šçš„åæ–œçº¿ä¸Šä¸é¥æœ‰çš‡å  
        for(int i = row -1, j = col + 1; i >= 0 && j < n; i--, j++) {  
            if(board[i][j] == 1) return false;  
        }  
  
        return true;  
    }  
}
```

## å››ã€æ€»ç»“

ä½è¿ç®—åœ¨ç®—æ³•ä¸­æ˜¯æ¯”è¾ƒ tricky çš„å­˜åœ¨ï¼Œæ¯”å¦‚åˆ¤æ–­å¥‡å¶æ€§ã€ä¹˜æ³•ç­‰èƒ½æé«˜ç®—æ³•è¿è¡Œçš„æ•ˆç‡ã€‚æ›´å¤æ‚ä¸€ç‚¹çš„ç®—æ³•ä¸­ï¼Œé€šè¿‡ bit ä½è®°å½•æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©ï¼Œå†ä¾æ¬¡éå†åˆ¤æ–­é€‰æ‹©æ˜¯å¦æ˜¯åˆæ³•è§£ï¼Œä¼šè®©ç®—æ³•ç†è§£èµ·æ¥ç®€å•ï¼Œç©ºé—´å ç”¨æ›´å°‘ï¼Œè¿™é‡Œä¸å±•å¼€ã€‚

åº”ç”¨å±‚é¢ä½¿ç”¨ä½è¿ç®—çš„ä¾‹å­æœ‰å¸ƒéš†è¿‡æ»¤å™¨ï¼ŒRedis ä¸­çš„ä½å›¾ç­‰ã€‚è¿™äº›ä¸»è¦æ˜¯æé«˜ç©ºé—´å¤æ‚åº¦ä¸ºä¸»ï¼ŒåŒæ—¶ä½è¿ç®—å¯¹æé«˜ç¨‹åºæ€§èƒ½ä¹Ÿæ›´å‹å¥½ã€‚